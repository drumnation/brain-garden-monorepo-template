---
description: AI agent responsibilities for documentation maintenance
globs:
  - "**/*"
alwaysApply: true
scopes:
  - global
  - monorepo
---

# AI Documentation Maintenance

> **When to apply:** Always - AI agents are responsible for maintaining documentation as part of every task

> **Scopes:** global, monorepo

## AI Agent Documentation Responsibilities

**Documentation is not optional** - it's an integral part of every task. If documentation is not updated, the task is incomplete.

### Your Role
- You are a documentation steward, not just a code writer
- Every change you make MUST be reflected in documentation
- Documentation decay is a bug - treat it as such
- Future AI agents will rely on your documentation accuracy

## Before Starting Any Task

1. **Read Relevant Documentation**
   - Review README.md in affected packages
   - Check CHANGELOG.md for recent changes
   - Read feature docs in `docs/features/` if applicable
   - Understand the three-tier documentation hierarchy

2. **Understand the Hierarchy**
   - **Package-level**: `packages/*/docs/` - Implementation details
   - **Feature-level**: `docs/features/*/` - Cross-package features
   - **Global**: `docs/architecture/` - System-wide architecture

3. **Check Existing Documentation**
   - Is there a README.md? Is it accurate?
   - Is there a CHANGELOG.md? Is it up-to-date?
   - Are there related feature docs?
   - Is the documentation structure complete?

## During Task Execution

1. **Keep Documentation Notes**
   - Track all changes for CHANGELOG entries
   - Note any breaking changes (version bump required)
   - Identify cross-package impacts (feature docs needed)
   - Document new APIs, functions, or components

2. **Identify Documentation Scope**
   - Single package change? → Update package README/CHANGELOG
   - Multi-package feature? → Create/update feature docs
   - Breaking change? → Version bump + migration guide
   - New package? → Full documentation suite required

3. **Monitor Impact**
   - Does this change affect other packages?
   - Will this break existing integrations?
   - Are there deprecations to announce?
   - Do examples need updating?

## Before Completing Any Task

**MANDATORY CHECKLIST** - Complete before marking task done:

- [ ] **CHANGELOG.md updated** with all changes in affected packages
- [ ] **README.md updated** if functionality, API, or usage changed
- [ ] **Feature docs created/updated** if changes span multiple packages
- [ ] **Version number bumped** if breaking changes (follow SemVer)
- [ ] **YAML frontmatter added** to any new markdown files
- [ ] **Links verified** between related documentation files
- [ ] **Code examples tested** and confirmed accurate
- [ ] **Migration guide written** for breaking changes

### Documentation Verification

Run this mental checklist:
1. Can a new developer understand what changed?
2. Are all new features documented?
3. Are breaking changes clearly marked?
4. Do all links work?
5. Are code examples copy-pasteable and correct?

## When Creating New Packages

**ALWAYS create complete documentation structure:**

1. **README.md** with these sections:
   - YAML frontmatter (title, description, keywords, last_updated)
   - Overview and purpose
   - Installation instructions
   - Exports and API surface
   - Usage examples with code
   - Testing instructions
   - Configuration details
   - Related documentation links

2. **CHANGELOG.md** with:
   - Keep a Changelog format
   - [Unreleased] section
   - Initial version entry with date
   - All features listed under [Added]

3. **docs/** directory with:
   - Implementation details
   - Architecture decisions
   - API reference
   - Integration guides

4. **Update root README.md**:
   - Add package to monorepo structure
   - Link to package documentation

## When Creating New Features

1. **Determine Feature Scope**
   - Is this feature used by multiple packages?
   - Does it span frontend and backend?
   - Is it a core system capability?

2. **Create Feature Documentation** if cross-package:
   - Location: `docs/features/[feature-name]/`
   - README.md with YAML frontmatter
   - Architecture overview
   - Data flow diagrams (text-based)
   - Integration points
   - Testing strategy
   - Related package links

3. **Update Package Documentation**:
   - Reference feature docs from package READMEs
   - Add feature-specific examples
   - Document package-specific implementation

## Documentation Quality Standards

### Writing Style
- **Clear and concise** - No fluff or marketing speak
- **Actionable** - Provide steps, not just descriptions
- **Complete** - Include all necessary information
- **Accurate** - Test all examples and verify links
- **Consistent** - Follow established patterns

### Code Examples
- **Working** - Must be copy-paste ready
- **Realistic** - Show actual use cases
- **Typed** - Include TypeScript types
- **Commented** - Explain non-obvious parts
- **Up-to-date** - Reflect current API

### YAML Frontmatter (Required)
```yaml
---
title: "Descriptive Title"
description: "Brief description of content"
keywords: [relevant, search, terms]
last_updated: "YYYY-MM-DD"
---
```

## CHANGELOG Entry Guidelines

Follow Keep a Changelog categories:

- **Added** - New features, new files, new capabilities
- **Changed** - Changes to existing functionality
- **Deprecated** - Features marked for removal
- **Removed** - Deleted features or files
- **Fixed** - Bug fixes
- **Security** - Security fixes or improvements

### Good CHANGELOG Entries
```markdown
### Added
- User authentication with Passport JWT strategy
- Transaction categorization with hierarchical categories
- Plaid integration for automatic transaction sync

### Changed
- API endpoints now return ISO 8601 timestamps
- Database queries optimized with indexes

### Fixed
- Transaction date parsing now handles all timezones
- Memory leak in WebSocket connections
```

### Bad CHANGELOG Entries
```markdown
### Added
- Stuff
- Things
- Updates

### Changed
- Fixed bugs
- Improved performance
```

## Version Bumping (SemVer 2.0.0)

Determine version bump type:

- **MAJOR (x.0.0)** - Breaking changes
  - API changes that break existing code
  - Removed features or exports
  - Changed function signatures
  - Requires migration guide

- **MINOR (0.x.0)** - New features (backward compatible)
  - New endpoints or functions
  - New optional parameters
  - New exports
  - No breaking changes

- **PATCH (0.0.x)** - Bug fixes (backward compatible)
  - Bug fixes only
  - Documentation updates
  - Performance improvements
  - No API changes

## Reference Documentation

- **Documentation hierarchy**: `docs/README.md`
- **Documentation rules**: `.cursor/rules/07-documentation.rules.mdc`
- **Rules system**: `.cursor/docs/README.md`
- **Keep a Changelog**: https://keepachangelog.com/
- **Semantic Versioning**: https://semver.org/

## Common Scenarios

### Scenario 1: Adding a New Feature to Existing Package
1. Implement feature with tests
2. Update package README.md with usage example
3. Add entry to package CHANGELOG.md under [Unreleased] → Added
4. Bump MINOR version if releasing
5. Update `last_updated` in YAML frontmatter

### Scenario 2: Fixing a Bug
1. Fix bug with test coverage
2. Add entry to CHANGELOG.md under [Unreleased] → Fixed
3. Bump PATCH version if releasing
4. Update related documentation if behavior changed

### Scenario 3: Breaking Change
1. Implement change
2. Write migration guide in CHANGELOG or docs/
3. Update all examples and documentation
4. Mark old API as deprecated first (if possible)
5. Add entry under [Unreleased] → Changed or Removed
6. Bump MAJOR version
7. Update `last_updated` everywhere affected

### Scenario 4: New Cross-Package Feature
1. Implement feature across packages
2. Create `docs/features/[feature-name]/README.md`
3. Update all affected package READMEs
4. Add CHANGELOG entries to all affected packages
5. Update `docs/features/README.md` with feature list
6. Bump appropriate versions

## Error Prevention

### Don't Do This
- ❌ Make changes without updating documentation
- ❌ Batch documentation updates at the end
- ❌ Copy-paste from AI without verifying
- ❌ Leave broken links
- ❌ Skip CHANGELOG entries
- ❌ Forget version bumps on breaking changes
- ❌ Write vague or incomplete descriptions

### Do This Instead
- ✅ Update docs as you code
- ✅ Verify all examples actually work
- ✅ Test all links and references
- ✅ Write detailed CHANGELOG entries
- ✅ Bump versions correctly
- ✅ Provide clear migration guides
- ✅ Review documentation before completing task

## Automation & Tools

### Before Committing
```bash
# Check that docs are up-to-date
pnpm rules:build  # Regenerate consolidated rules
git status        # Verify documentation changes included
```

### Documentation Validation
- All markdown files should have YAML frontmatter
- All code examples should have language tags
- All internal links should be relative
- All external links should be HTTPS

## Final Reminder

**No task is complete until documentation is updated.**

If you're unsure whether to update documentation, **err on the side of updating it**. Over-documentation is better than under-documentation.

Future you (and future AI agents) will thank you.
