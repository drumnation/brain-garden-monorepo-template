---
description: PM Agent motivation system - Track effort, quality, features, and progress to combat AI development memory loss
globs:
  - ".pm-agent/**/*"
  - "packages/pm-scripts/**/*"
  - "packages/core/**/*"
  - "packages/viewer/**/*"
  - "apps/viewer-app/**/*"
scopes:
  - pm-agent
  - motivation
  - tracking
  - database
  - todos
alwaysApply: false
---

# PM Agent Motivation System Rules

## Core Mission

**PM Agent solves the AI development motivation crisis:**
- AI development is 10x faster, but less hands-on time = less domain recall
- Developers forget project value after short breaks
- Memory distortions lead to abandoning nearly-finished valuable work
- PM Agent proves project worth with data-driven motivation metrics

## Motivation Metrics (MANDATORY)

Every feature MUST contribute to at least one motivation metric:

### 1. ðŸ’ª Effort Invested
- Session count and duration
- Token usage (Claude sessions)
- Commit history and frequency
- Lines of code (context, not vanity)

### 2. ðŸ—ï¸ Infrastructure Depth
- Test coverage percentage
- Tests passing/failing
- CI/CD pipeline status
- Build health
- Documentation score

### 3. âœ¨ Working Features
- Feature completion percentage
- User stories completed
- Working demos/screenshots
- Integration status

### 4. ðŸ“š Documentation Quality
- README completeness (0-100)
- Changelog maintenance
- API documentation
- Architecture docs

### 5. ðŸŽ¯ Progress Tracking
- Distance to goals (percentage)
- Blocked vs unblocked items
- Velocity trends
- Time since last activity

## Todo Tracking (MANDATORY)

**NEVER work without tracking:**

```javascript
// BEFORE starting ANY task
const todo = todoManager.createSessionTodo({
  content: "Task description",
  activeForm: "Doing task",
  project: "project-name"
});

// Mark in_progress when starting
todoManager.updateSessionTodo(todo.id, { status: 'in_progress' });

// MANDATORY: Record accomplishments when completing
todoManager.completeSessionTodo(todo.id, {
  what: "What was accomplished",
  how: "How it was done",
  impact: "What changed",
  filesChanged: ["file1.ts", "file2.ts"],
  learnings: ["Key insight 1", "Pattern discovered"]
});
```

**Why This Matters:**
- Creates permanent record of effort
- Captures learnings for future sessions
- Enables pattern detection across projects
- Makes invisible progress visible
- Provides accomplishment dopamine hits

## Database State Management

**Projects NEVER physically move.** All state is tracked in the database:

```sql
-- Quality scores table tracks motivation metrics
quality_scores (
  infrastructure_score,  -- Build, test, CI/CD health
  documentation_score,   -- README, changelog, docs
  maintenance_score,     -- Dependencies, security
  momentum_score        -- Activity, velocity
)

-- Session tracking for effort metrics
claude_sessions (
  session_id,
  tokens_used,
  duration_minutes,
  goals,
  accomplished
)
```

## Feature Development Rules

### Every feature must answer: "How does this help motivation?"

**Good Features:**
- âœ… Screenshot gallery showing working features
- âœ… Progress bars showing completion percentage
- âœ… Effort timeline showing work invested
- âœ… Quality dashboard with test coverage
- âœ… "You were so close!" proximity indicators

**Bad Features:**
- âŒ Complex workflows without clear value
- âŒ Features that don't surface accomplishments
- âŒ Metrics that shame rather than motivate
- âŒ Vanity metrics without substance

## Testing Priority

**E2E and Integration tests are MOST IMPORTANT:**
- They prove features actually work
- They prevent regression of motivation features
- They validate the complete user experience

```javascript
// PRIORITY 1: E2E test for motivation viewer
describe('Motivation Dashboard', () => {
  it('displays effort metrics for active projects', async () => {
    // Test that proves effort is visible
  });

  it('shows progress toward goals', async () => {
    // Test that proves progress tracking works
  });
});

// PRIORITY 2: Integration tests
describe('Database to UI flow', () => {
  it('quality scores update dashboard in real-time', async () => {
    // Test the complete data flow
  });
});

// PRIORITY 3: Unit tests (supplementary)
```

## Visual Memory Requirements

**Screenshots are GOLD for ADHD brains:**

```javascript
// Capture visual proof of working features
pmAgent.captureScreenshot({
  project: 'project-name',
  caption: 'Dashboard working with real data',
  feature: 'motivation-dashboard'
});

// Store in organized structure
.pm-agent/screenshots/
  {project-name}/
    {date}-{feature}-{caption}.png
```

## Session Continuity

**Every session must:**
1. Load previous session context
2. Show what was accomplished last time
3. Track current session todos
4. Capture session summary at end
5. Move incomplete todos to backlog

```javascript
// Session start
const context = todoManager.getSessionContext({
  project: getCurrentProject(),
  lastNSessions: 3
});

console.log(`Last session: ${context.lastSession.completed} tasks completed`);

// Session end
const summary = todoManager.captureSessionSummary();
console.log(`You accomplished ${summary.completed} tasks!`);
```

## Documentation Standards

**All documentation serves motivation:**

```markdown
## What This Does (Impact)
[Clear description of value provided]

## Effort Invested
- Sessions: X
- Commits: Y
- Tests: Z passing

## Current Status
[Visual indicator of health/progress]

## Quick Start
[Immediate path to see it working]
```

## Brain Garden Integration

**Capture all insights in memory:**

```bash
# Store project insights
sage-memory store "Project X authentication uses JWT with 1-hour expiry"

# Store session accomplishments
sage-memory store "Fixed Docker networking - port 8090 conflicts with AirPlay"

# Query for patterns
sage-memory search "motivation patterns"
```

## Anti-Patterns to Avoid

**DON'T:**
- âŒ Work without todo tracking (loses effort history)
- âŒ Skip recording accomplishments (loses learning)
- âŒ Move projects physically (breaks references)
- âŒ Create features without clear motivation purpose
- âŒ Prioritize unit tests over E2E tests
- âŒ Forget visual documentation (screenshots)

## Success Metrics

A successful PM Agent implementation will:
- Show effort invested at a glance
- Prove infrastructure quality with numbers
- Display working features visually
- Track progress toward goals
- Remind developers why projects matter
- Turn "should I continue?" into "I'm so close!"

## Remember

> "When you can't remember why a project matters, PM Agent shows you the data that proves its worth."

Every line of code, every test, every feature should serve this mission.